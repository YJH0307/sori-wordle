<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>sori-wordle</title>
  <style>
    body { font-family: sans-serif; text-align: center; }
    .board { display: grid; grid-template-rows: repeat(6, 1fr); gap: 5px; margin: 20px auto; width: max-content; }
    .row { display: grid; gap: 5px; }
    .cell {
      width: 50px; height: 50px;
      border: 2px solid #ccc; display: flex; justify-content: center; align-items: center;
      font-size: 25px; font-weight: bold;
    }
    .correct { background: #6aaa64; color: white; }
    .present { background: #c9b458; color: white; }
    .absent { background: #787c7e; color: white; }
    input { margin-top: 20px; font-size: 20px; }
  </style>
</head>
<body>
  <h1>sori-wordle ğŸµ</h1>
  <div class="board" id="board"></div>
  <input type="text" id="guessInput" placeholder="ë‹¨ì–´ ì…ë ¥" />
  <button onclick="submitGuess()">ì œì¶œ</button>

  <script>
    // ì´ˆì„±/ì¤‘ì„±/ì¢…ì„± í…Œì´ë¸”
    const ì´ˆì„± = [ "ã„±","ã„²","ã„´","ã„·","ã„¸","ã„¹","ã…","ã…‚","ã…ƒ","ã……","ã…†","ã…‡","ã…ˆ","ã…‰","ã…Š","ã…‹","ã…Œ","ã…","ã…" ];
    const ì¤‘ì„± = [ "ã…","ã…","ã…‘","ã…’","ã…“","ã…”","ã…•","ã…–","ã…—","ã…˜","ã…™","ã…š","ã…›","ã…œ","ã…","ã…","ã…Ÿ","ã… ","ã…¡","ã…¢","ã…£" ];
    const ì¢…ì„± = [ "","ã„±","ã„²","ã„³","ã„´","ã„µ","ã„¶","ã„·","ã„¹","ã„º","ã„»","ã„¼","ã„½","ã„¾","ã„¿","ã…€","ã…","ã…‚","ã…„","ã……","ã…†","ã…‡","ã…ˆ","ã…Š","ã…‹","ã…Œ","ã…","ã…" ];

    // ê¼¬ë“¤ ê·œì¹™ì— ë§ëŠ” ì´ì¤‘ëª¨ìŒ ë¶„ë¦¬
    const ê¼¬ë“¤ì´ì¤‘ëª¨ìŒ = {
      "ã…˜": ["ã…—","ã…"],
      "ã…™": ["ã…—","ã…"],
      "ã…š": ["ã…—","ã…£"],
      "ã…": ["ã…œ","ã…“"],
      "ã…": ["ã…œ","ã…”"],
      "ã…Ÿ": ["ã…œ","ã…£"],
      "ã…¢": ["ã…¡","ã…£"]
    };

    function ë¶„ë¦¬(í•œê¸€) {
      const code = í•œê¸€.charCodeAt(0) - 0xAC00;
      if (code < 0 || code > 11171) return [í•œê¸€];

      const ì´ˆ = Math.floor(code / 588);
      const ì¤‘ = Math.floor((code - (ì´ˆ * 588)) / 28);
      const ì¢… = code % 28;

      let result = [];
      result.push(ì´ˆì„±[ì´ˆ]);

      const ì¤‘ì = ì¤‘ì„±[ì¤‘];
      if (ê¼¬ë“¤ì´ì¤‘ëª¨ìŒ[ì¤‘ì]) {
        result.push(...ê¼¬ë“¤ì´ì¤‘ëª¨ìŒ[ì¤‘ì]);
      } else {
        result.push(ì¤‘ì);
      }

      if (ì¢… !== 0) result.push(ì¢…ì„±[ì¢…]);

      return result;
    }

    // ë‹¨ì–´ ëª©ë¡
    const ë‹¨ì–´ëª©ë¡ = ["ì‚¬ë‘í•´", "í•™êµ", "ë°”ëŒ", "ì¹œêµ¬", "ê³µë¶€", "ë¼ì§€", "í¬ë§"];
    const ì •ë‹µ = ë‹¨ì–´ëª©ë¡[Math.floor(Math.random() * ë‹¨ì–´ëª©ë¡.length)];

    // ì •ë‹µì„ ë‚±ì ë‹¨ìœ„ë¡œ ë¶„ë¦¬
    const ì •ë‹µë‚±ì = [];
    for (let ch of ì •ë‹µ) {
      ì •ë‹µë‚±ì.push(...ë¶„ë¦¬(ch));
    }

    const maxRows = 6;

    // ê²Œì„íŒ ì´ˆê¸°í™”
    const board = document.getElementById("board");
    for (let r = 0; r < maxRows; r++) {
      const row = document.createElement("div");
      row.className = "row";
      row.style.gridTemplateColumns = `repeat(${ì •ë‹µë‚±ì.length}, 50px)`;
      for (let c = 0; c < ì •ë‹µë‚±ì.length; c++) {
        const cell = document.createElement("div");
        cell.className = "cell";
        row.appendChild(cell);
      }
      board.appendChild(row);
    }

    let currentRow = 0;

    function submitGuess() {
      const guess = document.getElementById("guessInput").value.trim();
      if (!guess) return;

      const guessë‚±ì = [];
      for (let ch of guess) {
        guessë‚±ì.push(...ë¶„ë¦¬(ch));
      }

      // ë‚±ì ìˆ˜ê°€ ë‹¤ë¥´ë©´ ê±°ë¶€
      if (guessë‚±ì.length !== ì •ë‹µë‚±ì.length) {
        alert(`ë‚±ì ìˆ˜ê°€ ë‹¬ë¼ ë¹„êµí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. (í•„ìš”: ${ì •ë‹µë‚±ì.length}ì¹¸)`);
        return;
      }

      const row = board.children[currentRow].children;

      for (let i = 0; i < ì •ë‹µë‚±ì.length; i++) {
        row[i].textContent = guessë‚±ì[i] || "";
        if (guessë‚±ì[i] === ì •ë‹µë‚±ì[i]) {
          row[i].classList.add("correct");
        } else if (ì •ë‹µë‚±ì.includes(guessë‚±ì[i])) {
          row[i].classList.add("present");
        } else {
          row[i].classList.add("absent");
        }
      }

      if (guessë‚±ì.join("") === ì •ë‹µë‚±ì.join("")) {
        setTimeout(() => alert("ì •ë‹µ! ğŸ‰"), 100);
        return;
      }

      currentRow++;
      if (currentRow >= maxRows) {
        setTimeout(() => alert(`ì‹¤íŒ¨! ì •ë‹µì€ ${ì •ë‹µ}`), 100);
      }

      document.getElementById("guessInput").value = "";
    }
  </script>
</body>
</html>